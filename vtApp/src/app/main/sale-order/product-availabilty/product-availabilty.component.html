<div class="dialog-content-wrapper">
    <mat-toolbar class="mat-accent m-0">
        <mat-toolbar-row
            fxFlex
            fxLayout="row"
            fxLayoutAlign="space-between center"
        >
            <span class="title dialog-title">Search Available Product Quantity</span>
            <button
                mat-icon-button
                (click)="matDialogRef.close()"
                aria-label="Close dialog"
            >
                <mat-icon>close</mat-icon>
            </button>
        </mat-toolbar-row>
    </mat-toolbar>

    <div mat-dialog-content class="p-16 pb-0 m-0" fusePerfectScrollbar>
        <div fxLayout="column" fxLayoutAlign="space-evenly stretch" >
            <form
            name="clientForm"
            [formGroup]="productSearchForm"
            class="event-form w-100-p"
            fxLayout="column"
            fxFlex
        >

            <div fxLayout="row" fxLayoutAlign="space-between">
                <mat-form-field
                    appearance="outline"
                    fxFlex
                    floatLabel="always"
                    fxFlex="32"
                >
                    <mat-label>Product Category</mat-label>
                    <mat-select formControlName="selectedCategoryId" (selectionChange)="onProductCategoryChanged($event)" required>
                        <mat-option
                            *ngFor="let item of productCategories"
                            [value]="item.id"
                        >
                            {{ item.name }}
                        </mat-option>
                    </mat-select>
                    <mat-icon matSuffix class="secondary-text"
                        >outlined_flag</mat-icon
                    >
                </mat-form-field>

                <mat-form-field
                    appearance="outline"
                    fxFlex
                    floatLabel="always"
                    fxFlex="32"
                >
                    <mat-label>Product Sub Category</mat-label>
                    <mat-select formControlName="selectedSubCategoryId" (selectionChange)="onProductSubCategoryChanged($event)" required>
                        <mat-option
                            *ngFor="let item of productSubCategories"
                            [value]="item.id"
                        >
                            {{ item.name }}
                        </mat-option>
                    </mat-select>
                    <mat-icon matSuffix class="secondary-text"
                        >outlined_flag</mat-icon
                    >
                </mat-form-field>

                <mat-form-field
                appearance="outline"
                fxFlex
                floatLabel="always"
                fxFlex="32"
            >
                <mat-label>Product</mat-label>
                <mat-select formControlName="selectedProudctId"  (selectionChange)="onProductChanged($event)"  required>
                    <mat-option
                        *ngFor="let item of products"
                        [value]="item.id"
                    >
                        {{ item.name }}
                    </mat-option>
                </mat-select>
                <mat-icon matSuffix class="secondary-text"
                    >outlined_flag</mat-icon
                >

            </mat-form-field>
            </div>




        </form>
        </div>




        <div class="changelog">
        
            <!-- --------------------------------------------------------------------------------------------- -->
            <!-- @ v9.0.0                                                                                      -->
            <!-- --------------------------------------------------------------------------------------------- -->
            <div class="entry"  *ngFor="let item of productAvailabilities; index as i;" >

                <div class="title">
                    <span class="version">{{item.warhouseName}}</span>
                </div>

                <div fxLayout="column" fxLayoutAlign="space-evenly stretch" >

                    <div class="groups">

                        <div class="new">
                            
                            <ul>
                                <li><h3>Available Quantity : {{item.availableQty}} <span class="title">Available</span></h3></li>
    
                            </ul>
                        </div>
    
                    </div>

                    <div
                    class="event-form w-100-p"
                    fxLayout="row"
                    fxLayoutAlign="space-between stretch"
                >
                <div fxLayout="row" fxLayoutAlign="space-between stretch">

                    <div fxLayout="row" fxLayoutAlign="start center stretch" fxFlex="1 0 auto" class="mr-4">
    
                        <mat-form-field appearance="outline" fxFlex="1 0 auto" class="pr-4">
                            <mat-label>Add to Order</mat-label>
                            <input matInput  type="number" [(ngModel)]="item.newlyAddedQty"  min="1">
                        </mat-form-field>
    
                    </div>

                    <button
                    mat-mini-fab class="mr-4"
                    color="accent" (click)="addProducts(item)" [disabled]="item.availableQty==0">
                    <mat-icon
                        >add</mat-icon
                    >
                </button>

                <div fxLayout="row" fxLayoutAlign="start center stretch" fxFlex="1 0 auto" class="mr-4">
    
                    <mat-form-field appearance="outline" fxFlex="1 0 auto" class="pr-4">
                        <mat-label>Unit Price (LKR)</mat-label>
                        <input matInput  [(ngModel)]="item.unitPrice" disabled>
                    </mat-form-field>

                </div>

                <div fxLayout="row" fxLayoutAlign="center center" class="ml-4">
                    <button class="mr-4" mat-raised-button  type="button" color="accent" (click)="removeSingleProductFromOrder(item)" [disabled]="item.orderedQty==0">
                        -
                    </button>
                    <mat-form-field appearance="outline" fxFlex="1 0 auto" class="pr-4">
                        <mat-label>Added to Order</mat-label>
                        <input matInput [(ngModel)]="item.orderedQty"  disabled>
                    </mat-form-field>
                    <button mat-raised-button type="button" color="accent" class="ml-2" (click)="addSingleProductToOrder(item)" [disabled]="item.availableQty==0">
                        +
                    </button>
                </div>

                </div>
            
            </div>

                </div>




            </div>


        </div>
        
    </div>
</div>
